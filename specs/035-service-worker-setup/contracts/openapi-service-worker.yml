openapi: 3.0.3
servers:
  - url: https://api.example.com
    description: Production API endpoint (update as appropriate)
info:
  title: Service Worker Support / Offline Sync API (minimal)
  version: 1.0.0
  description: |
    Minimal contract for server-side acceptance of batched offline operations
    submitted by the client when connectivity is restored.
  contact:
    name: dnd-tracker API Team
    email: devops@dougis-org.example
tags:
  - name: sync
    description: Endpoints for offline synchronization of queued operations
paths:
  /sync/offline-ops:
    post:
      summary: Accept batched offline operations
      operationId: syncOfflineOperations
      tags: [sync]
      description: Client uploads queued operations collected while offline. Server should process idempotently and return per-item results.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                clientId:
                  type: string
                operations:
                  type: array
                  items:
                    type: object
                    properties:
                      id:
                        type: string
                      operation:
                        type: string
                      payload:
                        type: object
                      createdAt:
                        type: string
                        format: date-time
              required: [clientId, operations]
      responses:
        '200':
          description: Batch processed with per-item results
          content:
            application/json:
              schema:
                type: object
                properties:
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        status:
                          type: string
                          enum: [succeeded, failed]
                        message:
                          type: string
        '400':
          description: Bad request
